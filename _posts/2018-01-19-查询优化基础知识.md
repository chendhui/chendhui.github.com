---
layout:     post
title:      查询优化基础知识
subtitle:   查询优化基础知识概述
date:       2018-01-19
author:     chendh
header-img: img/post-bg-universe.jpg
catalog: true
tags:
    - query optimization
---


### 概述
处理一个给定的查询，尤其是复杂查询，通常会有许多种策略，查询优化就是从这许多策略中找出最有效的查询执行计划的处理过程。
### 查询执行计划的步骤
产生逻辑上与给定表达式等价的表达式；
估计每个执行计划的代价；
对所产生的表达式以不同方式做注释，产生不同的查询计划。

### 关系表达式的转换
如果两个关系代数表达式在所有有效数据库实例中都会产生相同的元组集，则我们称他们是等价的。
### 表达式结果集统计大小的估计 
**前提信息** ：关系r的元组数、磁盘块数、每个元组的字节数、关系r的块因子（一个磁盘块能容纳的关系r中元组的个数。  
**选择运算结果集大小的估计**  
**选择运算结果集大小的估计**  
**其他运算的结果集大小的统计**：投影、聚集、集合运算、外连接等。  
### 执行计划的选择
**基于代价的优化**：通过使用等价规则从给定的查询语句产生一系列查询执行计划，并选择代价最小的一个。  
**连接顺序优化**：基于等价转换，最常见的是基于动态规划的算法。目前的研究方向之一。  
**启发式优化**：尽早执行选择运算；尽早执行投影运算；缓存经常使用的查询计划。  
**嵌套子查询的优化**：尽可能转换成连接的形式。  
### 物化视图
**概念**：物化视图是一个其内容已计算并存储的视图。  
**视图维护**：保持物化视图与原始数据的同步更新。  
**维护方法**：增量的视图维护；立即的视图维护；延迟的视图维护。  